---
import BaseLayout from "../layouts/BaseLayout.astro";
import { LoginForm } from "../components/auth/LoginForm";
import { checkAuth } from "../utils/auth";

// Get redirectUrl from query params
const redirectUrl = Astro.url.searchParams.get('redirect') || '/dashboard';

// Check if user is already authenticated
const user = checkAuth();
if (user) {
  return Astro.redirect(redirectUrl);
}
---

<BaseLayout title="Logowanie">
  <div class="container mx-auto py-12 px-4">
    <div class="max-w-md mx-auto">
      <h1 class="text-3xl font-bold tracking-tight mb-6 text-center">Logowanie</h1>
      <LoginForm client:load redirectUrl={redirectUrl} />
    </div>
  </div>
</BaseLayout>
